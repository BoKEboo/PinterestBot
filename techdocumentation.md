# Техническая документация PinterestBot

PinterestBot - это Telegram-бот, разработанный на языке программирования C# с использованием библиотеки Telegram.Bot и HtmlAgilityPack. Бот позволяет пользователям получать и просматривать изображения из их учетных записей Pinterest.

## Содержание

1. [Введение](#введение)
2. [Основные возможности](#основные-возможности)
3. [Требования](#требования)
4. [Установка](#установка)
5. [Настройка](#настройка)
6. [Запуск](#запуск)
7. [Использование](#использование)
8. [Описание алгоритма работы](#описание-алгоритма-работы)
9. [Описание API Telegram.Bot](#описание-api-telegrambot)
10. [Описание классов](#описание-классов)
11. [Лицензия](#лицензия)
12. [Авторы](#авторы)

## Введение

PinterestBot разработан для удобного просмотра изображений из учетных записей Pinterest в Telegram. Бот позволяет пользователям отправить ссылку на свою учетную запись Pinterest, после чего он извлекает изображения и отображает их в чате Telegram. Пользователи могут легко навигироваться по изображениям с помощью кнопок встроенной клавиатуры.

## Основные возможности

- Получение изображений из учетных записей Pinterest по ссылке
- Отображение изображений в Telegram-чате
- Навигация по изображениям с помощью кнопок встроенной клавиатуры
- Возможность выбора другой учетной записи Pinterest

## Требования

Для использования PinterestBot необходимо удовлетворять следующим требованиям:

- Операционная система: любая поддерживаемая .NET-платформой
- [.NET 3.1 SDK](https://dotnet.microsoft.com/download/dotnet/3.1)
- [NuGet пакеты](#зависимости): HtmlAgilityPack и Telegram.Bot

## Установка

1. Склонируйте репозиторий `git clone https://github.com/BoKEboo/PinterestBot.git`
2. Откройте проект в выбранной вами среде разработки на языке C#.
3. Установите необходимые NuGet пакеты:
   - HtmlAgilityPack: `Install-Package HtmlAgilityPack`
   - Telegram.Bot: `Install-Package Telegram.Bot`
4. Соберите проект.

## Настройка

Перед запуском PinterestBot необходимо настроить API-токен Telegram. Для этого выполните следующие шаги:

1. Создайте нового Telegram-бота с помощью

 BotFather.
2. Получите API-токен для вашего бота.
3. Откройте файл `Config.cs` в проекте.
4. Замените значение `TelegramApiToken` на свой API-токен.

## Запуск

Для запуска PinterestBot выполните следующие действия:

1. В методе `Main` класса `Program` создайте экземпляр класса `TelegramBotClient`.
2. Зарегистрируйте обработчики событий `OnMessage` и `OnCallbackQuery`.
3. Вызовите метод `StartReceiving` для начала приема сообщений от Telegram.
4. Для остановки бота вызовите метод `StopReceiving`.

## Использование

1. В Telegram-чате отправьте команду `/start`, чтобы начать взаимодействие с ботом.
2. Бот запросит ссылку на вашу учетную запись Pinterest. Отправьте валидную ссылку на вашу учетную запись Pinterest в чате.
3. Если учетная запись содержит как минимум три изображения, бот отобразит первые три изображения.
4. Используйте кнопки встроенной клавиатуры для навигации по изображениям:
   - Нажмите "Далее", чтобы просмотреть следующий набор изображений (если они доступны).
   - Нажмите "Выбрать другой аккаунт", чтобы указать другую ссылку на учетную запись Pinterest.
5. Бот будет продолжать отображать изображения из выбранной учетной записи Pinterest, пока все изображения не будут показаны.
6. Чтобы выйти из бота, нажмите любую клавишу в консоли.

## Описание алгоритма работы

1. Бот ожидает сообщения от пользователей.
2. При получении сообщения, бот проверяет его тип:
   - Если тип сообщения - текст, бот проверяет, начинается ли текст с команды "/start".
   - Если да, бот отправляет приветственное сообщение и запрашивает ссылку на учетную запись Pinterest.
   - Если нет, бот проверяет, является ли текст валидной ссылкой на учетную запись Pinterest.
   - Если да, бот извлекает изображения с указанной учетной записи и отправляет первые три изображения пользователю.
   - Если нет, бот отправляет сообщение об ошибке.
3. Пользователь может нажать кнопки встроенной клавиатуры для навигации:
   - Кнопка "Далее" позволяет просмотреть следующий набор изображений (если они доступны).
   - Кнопка "Выбрать другой аккаунт" позволяет указать другую ссылку на учетную запись Pinterest.
4. Бот продолжает отправлять изображения пользователю в со

ответствии с его действиями.
5. Бот останавливается, когда пользователь нажимает любую клавишу в консоли.

## Описание API Telegram.Bot

Библиотека Telegram.Bot предоставляет удобный интерфейс для работы с Telegram Bot API. В данном проекте используются следующие методы API:

- `SendTextMessageAsync`: отправляет текстовое сообщение в чат Telegram.
- `SendPhotoAsync`: отправляет изображение в чат Telegram.
- `AnswerCallbackQueryAsync`: отправляет ответ на запрос пользователя, вызванный при нажатии кнопки встроенной клавиатуры.

## Описание классов

Проект содержит следующие классы:

- `Program`: главный класс, содержащий точку входа в приложение и обработчики событий бота.
- `Config`: класс, содержащий конфигурационные данные, включая API-токен Telegram.
- `PinterestBot`: класс, содержащий основную логику работы бота.
- `UserState`: класс, представляющий состояние пользователя, включая кэш изображений и ссылку на учетную запись Pinterest.

## Лицензия

PinterestBot распространяется под лицензией MIT. Подробности см. в файле [LICENSE](https://github.com/KiaruGa/PinterestBot/blob/master/LICENSE.txt).

## Авторы

PinterestBot разработан [BoKEboo](https://github.com/BoKEboo).
